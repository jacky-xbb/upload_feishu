# å¿«é€Ÿå‚è€ƒ

## ğŸ¯ ç›®å½•æ‰«æè§„åˆ™é€ŸæŸ¥

### æ ¹ç›®å½•ç»“æ„

```
Z:\PM\01 Doc mgt\
â”œâ”€â”€ 01_BCG\              â†’ ç›´æ¥æ‰«æ
â”œâ”€â”€ 02_Policy\           â†’ é€‰æ‹©æ€§æ‰«æ
â””â”€â”€ 03_Reg_WI\           â†’ é€‰æ‹©æ€§æ‰«æ
```

### è¯¦ç»†è§„åˆ™

| ç›®å½•        | æ‰«æç­–ç•¥ | æ‰«æçš„å­ç›®å½•             | å¿½ç•¥çš„å­ç›®å½•                                            |
| ----------- | -------- | ------------------------ | ------------------------------------------------------- |
| `01_BCG`    | ç›´æ¥     | `00_Publish`             | -                                                       |
| `02_Policy` | é€’å½’     | `02_GPS/*`, `03_EPS/*`   | `01_List Report`, `04_Shared info`                      |
| `03_Reg_WI` | é€’å½’     | `02_in working Reg WI/*` | `01_List Report`, `03_Deleted Reg WI`, `04_Shared info` |

---

## ğŸš€ å¸¸ç”¨å‘½ä»¤

### æµ‹è¯•ç›¸å…³

```bash
# åˆ›å»ºæµ‹è¯•æ•°æ®
python3 scripts/create_test_structure.py

# æ¼”ç»ƒæ¨¡å¼ï¼ˆä¸å®é™…ä¸Šä¼ ï¼‰
python3 feishu_uploader.py test_data --dry-run

# æ¸…ç†æµ‹è¯•æ•°æ®
rm -rf test_data
```

### å®é™…ä½¿ç”¨

```bash
# æ ‡å‡†ä¸Šä¼ ï¼ˆä¸²è¡Œï¼‰
python3 feishu_uploader.py "Z:\PM\01 Doc mgt"

# å¹¶å‘ä¸Šä¼ ï¼ˆæ¨èï¼Œå¿« 70-80%ï¼‰
python3 feishu_uploader.py "Z:\PM\01 Doc mgt" --concurrent

# å¼ºåˆ¶é‡æ–°ä¸Šä¼ æ‰€æœ‰æ–‡ä»¶
python3 feishu_uploader.py "Z:\PM\01 Doc mgt" --concurrent --force

# ä»…é‡è¯•å¤±è´¥çš„æ–‡ä»¶
python3 feishu_uploader.py "Z:\PM\01 Doc mgt" --concurrent --retry
```

---

## ğŸ“ æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶                               | ç”¨é€”                         |
| ---------------------------------- | ---------------------------- |
| `feishu_uploader.py`               | ä¸»ç¨‹åºï¼ˆå‘½ä»¤è¡Œç‰ˆæœ¬ï¼‰         |
| `feishu_uploader_gui.py`           | GUI ç‰ˆæœ¬                     |
| `.env`                             | é…ç½®æ–‡ä»¶ï¼ˆéœ€æ‰‹åŠ¨åˆ›å»ºï¼‰       |
| `.upload_history.json`             | ä¸Šä¼ å†å²è®°å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰     |
| `failed_uploads.json`              | å¤±è´¥æ–‡ä»¶æ¸…å•ï¼ˆæœ‰å¤±è´¥æ—¶ç”Ÿæˆï¼‰ |
| `scripts/create_test_structure.py` | æµ‹è¯•æ•°æ®ç”Ÿæˆè„šæœ¬             |
| `scripts/README.md`                | æµ‹è¯•è„šæœ¬è¯´æ˜                 |
| `scripts/TEST_REPORT.md`           | æµ‹è¯•éªŒè¯æŠ¥å‘Š                 |

---

## âš™ï¸ ç¯å¢ƒå˜é‡

åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®ï¼š

```env
FEISHU_APP_ID=cli_xxxxxxxxx
FEISHU_APP_SECRET=xxxxxxxxx
FEISHU_PARENT_NODE=fldcnxxxxxxxxx
```

### è·å–æ–¹å¼

1. **App ID & Secret**: [é£ä¹¦å¼€æ”¾å¹³å°](https://open.feishu.cn/app) â†’ åº”ç”¨ç®¡ç† â†’ å‡­è¯ä¸åŸºç¡€ä¿¡æ¯
2. **Parent Node**: é£ä¹¦äº‘æ–‡æ¡£ç›®æ ‡æ–‡ä»¶å¤¹ URL çš„æœ€åä¸€æ®µ
   - ä¾‹å¦‚: `https://xxx.feishu.cn/drive/folder/fldcnABC123`
   - Parent Node = `fldcnABC123`

---

## ğŸ” éªŒè¯æ‰«æç»“æœ

### é¢„æœŸç»“æœï¼ˆä½¿ç”¨æµ‹è¯•æ•°æ®ï¼‰

- âœ… **åº”è¯¥æ‰¾åˆ°**: 10 ä¸ª `00_Publish` ç›®å½•
  - 1 ä¸ªæ¥è‡ª `01_BCG`
  - 3 ä¸ªæ¥è‡ª `02_Policy/02_GPS`
  - 2 ä¸ªæ¥è‡ª `02_Policy/03_EPS`
  - 4 ä¸ªæ¥è‡ª `03_Reg_WI/02_in working Reg WI`

- âŒ **ä¸åº”è¯¥æ‰¾åˆ°**: 5 ä¸ªå¹²æ‰°ç›®å½•
  - `02_Policy/01_List Report/00_Publish`
  - `02_Policy/04_Shared info/00_Publish`
  - `03_Reg_WI/01_List Report/00_Publish`
  - `03_Reg_WI/03_Deleted Reg WI/00_Publish`
  - `03_Reg_WI/04_Shared info/00_Publish`

### éªŒè¯å‘½ä»¤

```bash
# æŸ¥çœ‹æ‰€æœ‰ 00_Publish ç›®å½•
find test_data -type d -name "00_Publish" | sort

# ç»Ÿè®¡æ•°é‡
find test_data -type d -name "00_Publish" | wc -l
# åº”è¯¥æ˜¾ç¤º: 15 (10ä¸ªæ­£ç¡® + 5ä¸ªå¹²æ‰°)

# ä½†å·¥å…·åªä¼šæ‰«æåˆ° 10 ä¸ª
python3 feishu_uploader.py test_data --dry-run | grep "å…±æ‰¾åˆ°"
# åº”è¯¥æ˜¾ç¤º: å…±æ‰¾åˆ° 10 ä¸ªå‘å¸ƒç›®å½•
```

---

## ğŸ’¡ æç¤º

- é¦–æ¬¡è¿è¡Œå»ºè®®ä½¿ç”¨ `--dry-run` æŸ¥çœ‹æ‰«æç»“æœ
- ä½¿ç”¨ `--concurrent` å¯å¤§å¹…æå‡ä¸Šä¼ é€Ÿåº¦
- `.upload_history.json` å®ç°å¢é‡ä¸Šä¼ ï¼Œä¸è¦åˆ é™¤
- å¤±è´¥åä½¿ç”¨ `--retry` ä»…é‡ä¼ å¤±è´¥æ–‡ä»¶
- æµ‹è¯•è„šæœ¬ä¼šåˆ›å»ºçœŸå®æ–‡ä»¶ï¼Œè®°å¾—æ¸…ç†

---

## ğŸ› æ•…éšœæ’é™¤

| é—®é¢˜                   | è§£å†³æ–¹æ¡ˆ                         |
| ---------------------- | -------------------------------- |
| æ‰«æåˆ°äº†ä¸è¯¥æ‰«æçš„ç›®å½• | æ£€æŸ¥ç›®å½•åç§°æ˜¯å¦å®Œå…¨åŒ¹é…è§„åˆ™     |
| ä¸Šä¼ å¤±è´¥ (403)         | æ£€æŸ¥é£ä¹¦åº”ç”¨æƒé™å’Œæ–‡ä»¶å¤¹è®¿é—®æƒé™ |
| ä¸Šä¼ å¤±è´¥ (407)         | ä½¿ç”¨ `--skip-proxy` å‚æ•°         |
| Token è¿‡æœŸ             | å·¥å…·ä¼šè‡ªåŠ¨åˆ·æ–°ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†     |
| æ‰¾ä¸åˆ° 00_Publish      | ç¡®è®¤æ ¹ç›®å½•è·¯å¾„æ­£ç¡®               |

---

**æœ€åæ›´æ–°**: 2026-01-29  
**ç‰ˆæœ¬**: 2.0 (æ”¯æŒ BSH æ–‡æ¡£ç®¡ç†è§„èŒƒ)
